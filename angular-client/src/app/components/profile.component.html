<div class="profile-container">
  <div class="profile-header">
    <h1>User Profile</h1>
    <div class="user-info">
      <div class="avatar">
        <span>{{ username.charAt(0).toUpperCase() }}</span>
      </div>
      <div class="user-details">
        <h2>{{ username }}</h2>
        <p class="user-status">Active User</p>
      </div>
    </div>
  </div>

  <div class="profile-content">
    <!-- Success/Error Messages -->
    <div *ngIf="success" class="alert alert-success">
      {{ success }}
    </div>
    <div *ngIf="error" class="alert alert-error">
      {{ error }}
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-spinner">
      <div class="spinner"></div>
      <p>Loading preferences...</p>
    </div>

    <!-- Preferences Section -->
    <div class="preferences-section" *ngIf="!loading">
      <div class="section-header">
        <h3>Household Responsibilities</h3>
        <button 
          *ngIf="!isEditing" 
          (click)="toggleEdit()" 
          class="btn btn-primary">
          Edit Preferences
        </button>
      </div>

      <form class="preferences-form" (ngSubmit)="savePreferences()">
        <div class="preferences-grid">
          <!-- Pet & Plant Care -->
          <div class="preference-group">
            <h4>Pet & Plant Care</h4>
            
            <div class="preference-item">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="preferences.petCare" 
                  name="petCare"
                  [disabled]="!isEditing">
                <span class="checkmark"></span>
                <div class="preference-text">
                  <span class="preference-title">Pet Care</span>
                  <span class="preference-description">Feeding, walking, and caring for pets</span>
                </div>
              </label>
            </div>

            <div class="preference-item">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="preferences.plantCare" 
                  name="plantCare"
                  [disabled]="!isEditing">
                <span class="checkmark"></span>
                <div class="preference-text">
                  <span class="preference-title">Plant Care</span>
                  <span class="preference-description">Watering and maintaining house plants</span>
                </div>
              </label>
            </div>
          </div>

          <!-- Household Chores -->
          <div class="preference-group">
            <h4>Household Chores</h4>
            
            <div class="preference-item">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="preferences.laundry" 
                  name="laundry"
                  [disabled]="!isEditing">
                <span class="checkmark"></span>
                <div class="preference-text">
                  <span class="preference-title">Laundry</span>
                  <span class="preference-description">Washing, drying, and folding clothes</span>
                </div>
              </label>
            </div>

            <div class="preference-item">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="preferences.cooking" 
                  name="cooking"
                  [disabled]="!isEditing">
                <span class="checkmark"></span>
                <div class="preference-text">
                  <span class="preference-title">Cooking</span>
                  <span class="preference-description">Meal preparation and kitchen duties</span>
                </div>
              </label>
            </div>

            <div class="preference-item">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="preferences.houseWork" 
                  name="houseWork"
                  [disabled]="!isEditing">
                <span class="checkmark"></span>
                <div class="preference-text">
                  <span class="preference-title">House Work</span>
                  <span class="preference-description">Cleaning, dusting, and general maintenance</span>
                </div>
              </label>
            </div>
          </div>

          <!-- Organization & Family -->
          <div class="preference-group">
            <h4>Organization & Family</h4>
            
            <div class="preference-item">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="preferences.organization" 
                  name="organization"
                  [disabled]="!isEditing">
                <span class="checkmark"></span>
                <div class="preference-text">
                  <span class="preference-title">Organization</span>
                  <span class="preference-description">Keeping things tidy and organized</span>
                </div>
              </label>
            </div>

            <div class="preference-item">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="preferences.familyCare" 
                  name="familyCare"
                  [disabled]="!isEditing">
                <span class="checkmark"></span>
                <div class="preference-text">
                  <span class="preference-title">Family Care</span>
                  <span class="preference-description">Caring for family members and children</span>
                </div>
              </label>
            </div>
          </div>

          <!-- Outdoor Work -->
          <div class="preference-group">
            <h4>Outdoor & Maintenance</h4>
            
            <div class="preference-item">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="preferences.yardWork" 
                  name="yardWork"
                  [disabled]="!isEditing">
                <span class="checkmark"></span>
                <div class="preference-text">
                  <span class="preference-title">Yard Work</span>
                  <span class="preference-description">Gardening, mowing, and outdoor maintenance</span>
                </div>
              </label>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="form-actions" *ngIf="isEditing">
          <button type="button" (click)="toggleEdit()" class="btn btn-secondary">
            Cancel
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="loading">
            <span *ngIf="loading">Saving...</span>
            <span *ngIf="!loading">Save Preferences</span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Navigation Footer -->
  <div class="profile-footer">
    <button (click)="goToTodos()" class="btn btn-outline">
      Go to Todos
    </button>
    <button (click)="logout()" class="btn btn-danger">
      Logout
    </button>
  </div>
</div>
